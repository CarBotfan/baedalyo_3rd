<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.portone.io/v2/browser-sdk.js"></script>

</head>
<body>

    <select id="testselect">
        <option value="CARD">통합모듈</option>
        <option value="TRANSFER">실시간 계좌이체</option>
        <option value="VIRTUAL_ACCOUNT">가상계좌</option>
        <option value="MOBILE">휴대폰 소액결제</option>
    </select>
    <button id="testinsurance">
        버튼
    </button>
    <script>
        $("#testinsurance").click( async function()
        {

            let payment = $("#testselect").val() ;

            let pay
            switch ($("#testselect").val()) {
                case "VIRTUAL_ACCOUNT":
                    pay = { virtualAccount: { accountExpiry: { validHours : 1 } } };
                    break;
                case "MOBILE":
                    pay = { productType: "DIGITAL" };
                    break;
                default:
                    pay = {};
                    break;
            }
            console.log(pay)
            const response = await PortOne.requestPayment({
                // Store ID 설정
                storeId: "store-fea01fbe-7f7a-4c41-9ab7-7ca7249ebc2a",
                // 채널 키 설정
                channelKey: "channel-key-fb10d184-0d73-441a-98cf-b354125c63f4",
                paymentId: `payment-${crypto.randomUUID()}`,
                orderName: "나이키 와플 트레이너 2 SD",
                totalAmount: 100,
                currency: "CURRENCY_KRW",
                payMethod: $("#testselect").val(),
                ...pay,
                customer: {
                    customerId: "user_lzc1op02",
                },
                customData: "asdasdasd", // USER JWT TOKEN 첨부
                redirectUrl: "http://localhost:8080/",
            });
            console.log(response) ;
        })


    </script>


</body>
</html>